<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title data-key="meta_title">Descubre Ometepe - Gu√≠a de Turismo Local</title>
  <link rel="stylesheet" href="Styles.css" />
  <!-- Mejoras: a√±adir meta description y posibilidad de favicon m√°s adelante -->
</head>
<body>
  <header>
    <div class="logo">
      <img src="IMG/LOGO 2.png" alt="Logo Dosvolcanes" class="logo-img" />
      <span class="logo-text">Dosvolcanes.com</span>
    </div>

    <div class="lang-switch" style="display:inline-block; margin-right:10px;" aria-hidden="true"></div>

    <button class="menu-toggle" id="menuToggle" aria-expanded="false" aria-label="Abrir men√∫">&#9776;</button>

    <nav id="navbar" aria-label="Navegaci√≥n principal">
      <ul>
        <li><a id="nav_inicio" href="#inicio" data-key="nav_inicio">Inicio</a></li>
        <li><a id="nav_alojamiento" href="#alojamiento" data-key="nav_alojamiento">Alojamiento</a></li>
        <li><a id="nav_transporte" href="#transporte" data-key="nav_transporte">Transporte</a></li>
        <li><a id="nav_ferry" href="#ferry" data-key="nav_ferry">Ferrys</a></li>
        <li><a id="nav_explora" href="#actividades_detalladas" data-key="nav_explora">Explora</a></li>
        <li><a id="nav_mapa" href="#mapa_ubicacion" data-key="nav_mapa">Mapa</a></li>
        <li><a id="nav_contacto" href="#contacto" data-key="nav_contacto">Contacto</a></li>
        <li style="display:none"><a href="Index_en.html" id="link_toggle_old" class="idioma">English</a></li>
        <li><button class="lang-btn" onclick="setLanguage('es')" aria-label="Cambiar idioma a Espa√±ol">ES</button></li>
        <li><button class="lang-btn" onclick="setLanguage('en')" aria-label="Cambiar idioma a Ingl√©s">EN</button></li>
        <li><button id="darkModeToggle" class="lang-btn" aria-pressed="false" aria-label="Alternar modo oscuro">üåô</button></li>
      </ul>
    </nav>
  </header>

  <main>
    <!-- HERO -->
    <section id="inicio" class="hero">
      <h1 data-key="hero_title">Bienvenido a la Isla de Ometepe</h1>
      <p data-key="hero_subtitle">Dos volcanes, un para√≠so. Explora sus maravillas naturales y culturales.</p>

      <div class="carousel-container">
        <div class="carousel-track" id="carouselTrack">
          <img src="IMG/1 (1).jpg" alt="Ferry Ometepe" class="slide-item active">
          <img src="IMG/1 (2).jpg" alt="Ojo de Agua" class="slide-item">
          <img src="IMG/1 (3).jpg" alt="Playa Los Mangos" class="slide-item">
          <img src="IMG/1 (4).jpg" alt="Punta Jes√∫s Mar√≠a" class="slide-item">
        </div>
        <button class="prev" onclick="moveSlide(1, -1)" aria-label="Anterior">&#10094;</button>
        <button class="next" onclick="moveSlide(1, 1)" aria-label="Siguiente">&#10095;</button>
      </div>
    </section>

    <!-- FERRY (video) -->
    <section id="ferry" class="seccion">
      <h2 data-key="ferry_video_title">Bienvenidos a Ometepe</h2>
      <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 10px;">
        <iframe id="heroVideo"
                src="https://www.youtube.com/embed/7W2XBBeSZh0?si=pV57LLjqOJ5gZkre"
                frameborder="0"
                title="Video presentaci√≥n Ometepe"
                allowfullscreen
                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 10px;">
        </iframe>
      </div>

      <p class="aviso" data-key="ferry_funfact"><strong>Dato Curioso:</strong> La isla de Ometepe es la √∫nica isla del mundo con dos volcanes dentro de un mismo lago de agua dulce</p>
    </section>

    <!-- ALOJAMIENTO -->
    <section id="alojamiento" class="seccion">
      <h2 data-key="alojamiento_title">Hoteles y Restaurantes</h2>
      <div class="grid">
        <div class="tarjeta">
          <h3 data-key="alojamiento_card1_title">Alojamiento</h3>
          <p data-key="alojamiento_card1_text">Desde hostales econ√≥micos hasta lodges de lujo, encuentra tu lugar ideal para descansar despu√©s de la aventura.</p>
          <ul>
            <li><a href="https://villaparaiso.com.ni/welcome.php" target="_blank" rel="noopener noreferrer" data-key="link_paraiso">Eco-Lodge Para√≠so (Isla de Ometepe)</a></li>
            <li><a href="https://www.facebook.com/reservacionesEHVM/" target="_blank" rel="noopener noreferrer" data-key="link_hotel_volcan">Hotel Volc√°n (Altagracia)</a></li>
            <li><a href="https://www.tripadvisor.es/Hotel_Review-g1720870-d5778818-Reviews-Hotel_El_Viajero-Ocotal_Nueva_Segovia_Department.html" target="_blank" rel="noopener noreferrer" data-key="link_hostal_viajero">Hostal El Viajero (Moyogalpa)</a></li>
          </ul>
        </div>
        <div class="tarjeta">
          <h3 data-key="gastronomia_title">Gastronom√≠a Local</h3>
          <p data-key="gastronomia_text">Prueba el pescado frito fresco, el vigor√≥n y los deliciosos platos t√≠picos nicarag√ºenses.</p>
          <ul>
            <li><a href="https://www.facebook.com/people/Comedor-Do%C3%B1a-Mar%C3%ADa/100063769850961/" target="_blank" rel="noopener noreferrer" data-key="link_dona_maria">Comedor Do√±a Mar√≠a</a></li>
            <li><a href="https://hotelin.com/hotel/Nicaragua/Hostal-La-Casona-7158831" target="_blank" rel="noopener noreferrer" data-key="link_la_casona">Restaurante La Casona</a></li>
            <li><a href="https://www.instagram.com/explore/locations/102337117837420/mirador-los-volcanes-ometepe/" target="_blank" rel="noopener noreferrer" data-key="link_mirador">Caf√© El Mirador</a></li>
          </ul>
        </div>
      </div>
    </section>

    <!-- TRANSPORTE -->
    <section id="transporte" class="seccion">
      <h2 data-key="transporte_title">Renta de Veh√≠culos y Motocicletas</h2>
      <div class="grid">
        <div class="tarjeta">
          <h3 data-key="transporte_motos_title">Motos (Recomendado)</h3>
          <p data-key="transporte_motos_text">Perfectas para acceder a todos los rincones de Ometepe. Aseg√∫rate de tener licencia.</p>
          <p><strong data-key="contacto_label">Contacto:</strong> Rentas "El Veloz" | Tel: 5797-3164</p>
        </div>
        <div class="tarjeta">
          <h3 data-key="transporte_coches_title">Autom√≥viles (4x4 Sugerido)</h3>
          <p data-key="transporte_coches_text">Necesario para grupos grandes o mayor comodidad, especialmente en la temporada de lluvia.</p>
          <p><strong data-key="contacto_label_2">Contacto:</strong> Ometepe Car Rental | info@rentaometepe.com</p>
        </div>
      </div>
    </section>

    <!-- FERRYS (info) -->
    <section id="ferry_info" class="seccion">
      <h2 data-key="ferry_info_title">Ferrys: Moyogalpa - San Jorge</h2>
      <div class="tarjeta">
        <h3 data-key="ferry_proceso_title">Proceso de Reservaci√≥n y Compra</h3>
        <ol>
          <li data-key="ferry_step1">Llega al puerto de San Jorge o Moyogalpa una hora antes.</li>
          <li data-key="ferry_step2">Compra boletos en taquilla (pasajeros o veh√≠culos).</li>
          <li data-key="ferry_step3">Presenta matr√≠cula y licencia si llevas veh√≠culo.</li>
          <li data-key="ferry_step4">Embarque: primero veh√≠culos, luego pasajeros.</li>
          <li data-key="ferry_step5">Duraci√≥n: entre 1h y 1h 30m.</li>
        </ol>
        <p class="aviso" data-key="ferry_tip">TIP: Los horarios var√≠an. Consulta cartelera al llegar al puerto.</p>
      </div>
    </section>

    <!-- ACTIVIDADES -->
    <section id="actividades_detalladas" class="seccion">
      <h2 data-key="actividades_title">Lo que No Te Puedes Perder</h2>
      <div id="actividades-carousel-container">
        <div class="carousel-track" id="carouselActividadesTrack">
          <div class="actividad-slide active">
            <img src="IMG/ojodeagua.jpg" alt="Ojo de Agua">
            <h3 data-key="act_ojodeagua_title">Ojo de Agua</h3>
            <p data-key="act_ojodeagua_text">Una piscina natural alimentada por un manantial volc√°nico, perfecta para un refrescante ba√±o.</p>
          </div>
          <div class="actividad-slide">
            <img src="IMG/cascada.jpg" alt="Cascada San Ram√≥n">
            <h3 data-key="act_cascada_title">Cascada San Ram√≥n</h3>
            <p data-key="act_cascada_text">Un sendero de 3 km lleva a esta impresionante ca√≠da de agua de 50 metros.</p>
          </div>
          <div class="actividad-slide">
            <img src="IMG/puntajesusmaria.jpg" alt="Punta Jes√∫s Mar√≠a">
            <h3 data-key="act_punta_title">Punta Jes√∫s Mar√≠a</h3>
            <p data-key="act_punta_text">Un estrecho istmo de arena con vistas inigualables de los volcanes.</p>
          </div>
          <div class="actividad-slide">
            <img src="IMG/charco verde.jpg" alt="Charco Verde">
            <h3 data-key="act_charco_title">Reserva Charco Verde</h3>
            <p data-key="act_charco_text">Laguna esmeralda ideal para observar monos, aves y disfrutar la naturaleza.</p>
          </div>
        </div>
        <button class="prev" onclick="moveSlide(2, -1)" aria-label="Anterior actividad">&#10094;</button>
        <button class="next" onclick="moveSlide(2, 1)" aria-label="Siguiente actividad">&#10095;</button>
      </div>

      <h2 data-key="reviews_title">Deja tu rese√±a</h2>
      <form id="review-form" class="review-form">
        <div class="form-group">
          <label for="review-name" data-key="review_name_label">Tu nombre:</label>
          <input type="text" id="review-name" placeholder="Ingresa tu nombre" required />
        </div>

        <div class="form-group">
          <label data-key="review_rating_label">Tu calificaci√≥n:</label>
          <div class="stars">
            <label><input type="radio" name="rating" value="1" />‚≠ê</label>
            <label><input type="radio" name="rating" value="2" />‚≠ê‚≠ê</label>
            <label><input type="radio" name="rating" value="3" />‚≠ê‚≠ê‚≠ê</label>
            <label><input type="radio" name="rating" value="4" />‚≠ê‚≠ê‚≠ê‚≠ê</label>
            <label><input type="radio" name="rating" value="5" />‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</label>
          </div>
        </div>

        <div class="form-group">
          <label for="review-comment" data-key="review_comment_label">Tu comentario:</label>
          <textarea id="review-comment" rows="4" placeholder="Escribe tu experiencia..." required></textarea>
        </div>

        <button type="submit" data-key="review_submit">Enviar rese√±a</button>
      </form>

      <div id="reviewsList" class="reviews-list"></div>
    </section>

    <!-- MAPA -->
    <section id="mapa_ubicacion" class="seccion pt-8 mt-8">
      <h2 data-key="map_title"><i class="fas fa-map-marked-alt" aria-hidden="true"></i> Ubicaci√≥n Geogr√°fica de Ometepe</h2>
      <div class="rounded-xl overflow-hidden shadow-2xl border-4 border-green-500">
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d125111.74388892784!2d-85.67044813192412!3d11.498526352184207!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8f74f7f146cf28f3%3A0x10c8b30590d63e8f!2sOmetepe!5e0!3m2!1ses-419!2sni!4v1759848215795!5m2!1ses-419!2sni"
                width="100%"
                height="400"
                style="border:0;"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
                class="w-full h-[400px] md:h-[550px] lg:h-[650px]">
        </iframe>
      </div>
    </section>

    <!-- CONTACTO -->
    <section id="contacto" class="seccion contacto">
      <h2 data-key="contacto_title">Cont√°ctanos</h2>
      <div class="grid-contacto">
        <div class="tarjeta">
          <h3 data-key="contacto_info_title">Informaci√≥n de Contacto</h3>
          <p><strong data-key="telefono_label">Tel√©fono:</strong> +505 5821-5395</p>
          <p><strong data-key="email_label">Email:</strong> info@dosvolcanes.com</p>
          <p><strong data-key="direccion_label">Direcci√≥n:</strong> Moyogalpa, Isla de Ometepe</p>
        </div>

        <!-- NEWSLETTER: mantiene ids y estructura para compatibilidad con JS 
        <form id="newsletter-form" class="seccion contacto1" aria-label="Formulario de suscripci√≥n al bolet√≠n">
          <h3 data-key="newsletter_title">Suscribete a nuestro boletin</h3>
          <div class="form-group">
            <label for="newsletter-email" data-key="newsletter_label">Hazlo ahora!!:</label>
            <input type="email" id="newsletter-email" name="email" placeholder="Tu correo electr√≥nico" required />
          </div>
          <button type="submit" data-key="newsletter_submit">Suscribirme</button>
        </form> -->

        <!-- FORMULARIO DE CONTACTO (mantiene funcionalidad) -->
        <form id="contact-form" class="seccion contacto1" aria-label="Formulario de contacto">
          <div class="form-group">
            <label for="contact-name" data-key="contact_name_label">Nombre:</label>
            <input type="text" name="name" id="contact-name" placeholder="Tu nombre completo" required />
          </div>
          <div class="form-group">
            <label for="contact-email" data-key="contact_email_label">Correo electr√≥nico:</label>
            <input type="email" name="email" id="contact-email" placeholder="tunombre@email.com" required />
          </div>
          <div class="form-group">
            <label for="contact-message" data-key="contact_message_label">Mensaje:</label>
            <textarea id="contact-message" name="message" rows="5" placeholder="Escribe tu mensaje..." required></textarea>
          </div>
          <button type="submit" data-key="contact_submit">Enviar mensaje</button>
        </form>
      </div>
    </section>
  </main>

  <!-- Recursos / Scripts externos (ordenados y con defer si procede) -->
  <script src="lang.js"></script>
  <script src="carousel.js" defer></script>
  <script src="./js/visitor-counter.js" defer></script>
  <script type="module" src="./js/index.js" defer></script>
  <script src="./js/newsletter.js" defer></script>

  <!-- Floating WhatsApp -->
  <a id="whatsapp_float" href="https://wa.me/50558016497?text=Hola%2C%20estoy%20interesado%2Fda%20en%20mas%20informacion,%20Gracias." 
     class="whatsapp-float" target="_blank" aria-label="Contactar por WhatsApp" rel="noopener noreferrer">
    <img src="IMG/WH.png" alt="WhatsApp">
  </a>

  <!-- CHATBOT SENCILLO (usa respuestas traducibles) -->
  <div id="chatbot-container" class="chatbot-container" aria-hidden="false">
    <div id="chatbot-header" data-key="chat_header"> Chat - DosVolcanes</div>
    <div id="chatbot-messages" class="chatbot-messages" role="log" aria-live="polite"></div>
    <div class="chatbot-input">
      <input type="text" id="user-input" placeholder="" aria-label="Mensaje al chatbot" />
      <button id="send-btn" aria-label="Enviar mensaje">Enviar</button>
    </div>
  </div>

  <button id="chatbot-toggle" class="chatbot-toggle" aria-expanded="false" aria-controls="chatbot-container">ü§ñ</button>

  <!-- Chatbot UI logic (no cambia comportamiento, pero est√° encapsulado) -->
  <script>
    (function () {
      function normalizeText(text) {
        return text
          .toLowerCase()
          .normalize("NFD")
          .replace(/[\u0300-\u036f]/g, "")
          .replace(/[^\w\s]/gi, "");
      }

      const messagesDiv = document.getElementById("chatbot-messages");
      const input = document.getElementById("user-input");
      const sendBtn = document.getElementById("send-btn");
      const toggleBtn = document.getElementById("chatbot-toggle");
      const chatbot = document.getElementById("chatbot-container");

      function addMessage(text, sender) {
        const msg = document.createElement("div");
        msg.className = sender;
        msg.innerText = text;
        messagesDiv.appendChild(msg);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
      }

      function getResponse(userText) {
        const cleanText = normalizeText(userText);
        const responses = window.chatResponses || [];
        for (const r of responses) {
          if (r.keywords.some(k => cleanText.includes(k))) {
            return r.answer;
          }
        }
        return window.chatFallback || "No estoy seguro de eso , pero puedo ayudarte con alojamiento, transporte, ferrys, actividades o el mapa de Ometepe.";
      }

      sendBtn.addEventListener("click", () => {
        const text = input.value.trim();
        if (!text) return;
        addMessage((window.currentLang === 'en' ? "You: " : "T√∫: ") + text, "user");
        input.value = "";
        setTimeout(() => {
          addMessage((window.currentLang === 'en' ? "Bot: " : "Bot: ") + getResponse(text), "bot");
        }, 400);
      });

      input.addEventListener("keypress", (e) => {
        if (e.key === "Enter") sendBtn.click();
      });

      toggleBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        chatbot.classList.toggle("open");
        const expanded = toggleBtn.getAttribute('aria-expanded') === 'true';
        toggleBtn.setAttribute('aria-expanded', !expanded);
      });

      document.addEventListener("click", (e) => {
        if (!chatbot.contains(e.target) && !toggleBtn.contains(e.target)) {
          chatbot.classList.remove("open");
        }
      });
    })();
  </script>

  <!-- Dark mode toggle (mejor control de estado aria y persistencia) -->
  <script>
    (function () {
      const toggleDarkMode = document.getElementById("darkModeToggle");

      function setDarkMode(enabled) {
        document.body.classList.toggle("dark-mode", enabled);
        toggleDarkMode.textContent = enabled ? "‚òÄÔ∏è" : "üåô";
        toggleDarkMode.setAttribute('aria-pressed', String(enabled));
        localStorage.setItem("modoOscuro", enabled);
      }

      toggleDarkMode.addEventListener("click", () => setDarkMode(!document.body.classList.contains("dark-mode")));

      if (localStorage.getItem("modoOscuro") === "true") {
        setDarkMode(true);
      }
    })();
  </script>

  <footer>
    <p data-key="footer_text">&copy; 2025 Dos volcanes Todos los derechos reservados.</p>
    <p data-key="visitas_text">Visitas totales: <span id="showCounter">0</span></p>
    <!-- <a href="admin.html" class="adminb">Administrador</a> -->
  </footer>

  <!-- Cursor aura + particles encapsulado y mejor comentado -->
  <script>
    (function () {
      // Cursor aura
      const cursorAura = document.createElement('div');
      cursorAura.className = 'cursor-aura';
      document.body.appendChild(cursorAura);

      document.addEventListener('mousemove', (e) => {
        cursorAura.style.left = `${e.clientX}px`;
        cursorAura.style.top = `${e.clientY}px`;
        cursorAura.style.opacity = '1';
      });

      document.addEventListener('mouseleave', () => { cursorAura.style.opacity = '0'; });
      document.addEventListener('mouseenter', () => { cursorAura.style.opacity = '1'; });

      const interactiveSelectors = 'a, button, input, textarea, .logo, header, .tarjeta, main img, #chatbot-toggle, .whatsapp-float, .lang-switch, .menu-toggle, footer';
      const interactiveElements = document.querySelectorAll(interactiveSelectors);
      interactiveElements.forEach(el => {
        el.addEventListener('mouseenter', () => cursorAura.classList.add('active'));
        el.addEventListener('mouseleave', () => cursorAura.classList.remove('active'));
      });

      // Falling particles (crea y reemplaza part√≠culas continuamente)
      const particlesContainer = document.createElement('div');
      particlesContainer.id = 'particles-container';
      document.body.appendChild(particlesContainer);

      const numberOfParticles = 40;
      function createParticle() {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particlesContainer.appendChild(particle);
        const size = Math.random() * 5 + 2;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        const startX = Math.random() * 100;
        particle.style.left = `${startX}vw`;
        const duration = Math.random() * 10 + 5;
        particle.style.animationDuration = `${duration}s`;
        const delay = Math.random() * -duration;
        particle.style.animationDelay = `${delay}s`;
        const drift = Math.random() * 20 - 10;
        particle.style.setProperty('--drift', `${drift}vw`);
        particle.addEventListener('animationend', () => {
          particle.remove();
          createParticle();
        });
      }
      for (let i = 0; i < numberOfParticles; i++) createParticle();

      // Responsive menu logic (mantiene tu comportamiento)
      const menuToggle = document.getElementById('menuToggle');
      const navbar = document.getElementById('navbar');

      function closeMenu() {
        navbar.classList.remove('active');
        menuToggle.setAttribute('aria-expanded', 'false');
      }

      menuToggle.addEventListener('click', (e) => {
        e.stopPropagation();
        const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
        menuToggle.setAttribute('aria-expanded', !isExpanded);
        navbar.classList.toggle('active');
      });

      const navLinks = navbar.querySelectorAll('a');
      navLinks.forEach(link => link.addEventListener('click', closeMenu));

      document.addEventListener('click', (e) => {
        const isMenuOpen = navbar.classList.contains('active');
        if (isMenuOpen) {
          const isClickInsideNav = navbar.contains(e.target);
          const isClickInsideToggle = menuToggle.contains(e.target);
          if (!isClickInsideNav && !isClickInsideToggle) closeMenu();
        }
      });
    })();
  </script>
</body>
</html>
